(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2404:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(3282),l=a(4586),s=a(1355),n=a.n(s);let i=()=>(0,r.jsxs)("section",{className:"relative w-full bg-gradient-to-br from-blue-900 via-blue-700 to-indigo-800 text-white shadow-2xl py-2 md:pb-3",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500"}),(0,r.jsxs)("div",{className:"px-4 md:px-6 py-8 md:py-16",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-center gap-4 mb-4",children:(0,r.jsx)("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white tracking-tight",children:"Current & Archived Tournaments"})}),(0,r.jsx)("div",{className:"w-32 h-1 bg-gradient-to-r from-yellow-400 to-orange-500 mx-auto rounded-full"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-lg text-blue-100 max-w-2xl mx-auto",children:"Explore our comprehensive collection of chess tournaments and championship results"})}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsxs)(n(),{href:"/timeline",className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm text-white px-6 py-3 rounded-full border border-white/20 hover:bg-white/20 transition-all duration-200 font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View Timeline"]})})]}),(0,r.jsx)("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white/5 rounded-full blur-xl"}),(0,r.jsx)("div",{className:"absolute bottom-4 left-4 w-16 h-16 bg-yellow-400/10 rounded-full blur-lg"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-8 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"absolute top-1/3 right-12 w-1 h-1 bg-white rounded-full animate-pulse"})]}),d=e=>{let{options:t,activeOption:a,onOptionChange:l}=e;return(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,r.jsxs)("div",{className:"px-0 md:px-4",children:[(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)("div",{className:"flex justify-center border-b border-gray-200",children:t.map(e=>(0,r.jsxs)("button",{className:"relative px-8 py-4 font-medium text-sm transition-all duration-200 border-b-2 -mb-px ".concat(a===e?"text-blue-600 border-blue-600 bg-blue-50":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),onClick:()=>l(e),children:[e,a===e&&(0,r.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-0.5 bg-blue-600"})]},e))})}),(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)("div",{className:"flex justify-center border-b border-gray-200",children:t.map(e=>(0,r.jsx)("button",{className:"flex-1 px-1 md:px-4 py-4 font-medium text-sm transition-all duration-200 border-b-2 -mb-px ".concat(a===e?"text-blue-600 border-blue-600 bg-blue-50":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),onClick:()=>l(e),children:e},e))})})]})})};var o=a(1776);let c=["All","Completed","In Progress","Planned"];function m(){let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)("All"),[m,x]=(0,l.useState)(1),[u]=(0,l.useState)(18),[b,g]=(0,l.useState)(0),[h,p]=(0,l.useState)(!0),[N,f]=(0,l.useState)(null);function j(e){if(!e)return new Date(0);let t=e.split("/");if(3===t.length){let[e,a,r]=t.map(Number);return new Date(r,a-1,e)}return new Date(e)}(0,l.useEffect)(()=>{let e=new AbortController;return(async()=>{try{var e,a,r;p(!0),f(null);let l="libsql://vegaftp-samuraitruong.aws-ap-northeast-1.turso.io",s="eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJhIjoicnciLCJpYXQiOjE3NTc1MDYxNzcsImlkIjoiYmM0OGE3MzMtZGExNy00NjMyLWI3NzMtYzkwY2ZkNTRkOGUyIiwicmlkIjoiZmM5NzIwMTUtMDNkNi00ZThjLTgxMGMtZGVhNjMyNTI2Y2Y3In0.m0LjGLoXBHGRintNLL9812170PtpykyhLJ0KIoJzY1F5fO96aYFVlD8Q1T3QT804yfjzMz7DqTK7DQUBR1bvBg";if(!l||!s){console.warn("Missing NEXT_PUBLIC_TURSO_DATABASE_URL/NEXT_PUBLIC_TURSO_AUTH_TOKEN envs"),t([]),g(0),f("Database configuration missing");return}let n=(0,o.UU)({url:l,authToken:s}),i=(m-1)*u,d=await n.execute("SELECT COUNT(*) as c FROM tournament"),c=Number(null!=(r=null==(a=d.rows)||null==(e=a[0])?void 0:e.c)?r:0);g(c);let x=((await n.execute({sql:"SELECT id, name, start_date, end_date, rounds, arbiter, location, folder_path, federation, created_at\n                FROM tournament\n                ORDER BY datetime(created_at) DESC\n                LIMIT ? OFFSET ?",args:[u,i]})).rows||[]).map(e=>{var t,a,r,l,s,n,i;let d={"Tournament Name":String(null!=(t=e.name)?t:""),"Date Begin":String(null!=(a=e.start_date)?a:""),"Date End":String(null!=(r=e.end_date)?r:""),"Arbiter(s)":String(null!=(l=e.arbiter)?l:""),Place:String(null!=(s=e.location)?s:""),Rounds:String(null!=(n=e.rounds)?n:""),Federation:String(null!=(i=e.federation)?i:"")};return{id:e.id,name:e.name,category:"",createdAt:e.created_at,data:d,path:"www/".concat(e.folder_path||"","/data.json")}}),b=new Date,h=x.map(e=>{let t=e.data["Date Begin"]||e.data.Date||"",a=e.data["Date End"]||e.data["End Date"]||"",r=j(t),l=j(a),s="Completed";return s=l.getTime()<b.getTime()?"Completed":r.getTime()>b.getTime()?"Planned":"In Progress",{...e,status:s}});t(h)}catch(e){console.error("Error loading tournaments:",e),f(e instanceof Error?e.message:"Failed to load tournaments"),t([]),g(0)}finally{p(!1)}})(),()=>e.abort()},[m,u]);let y=(0,l.useMemo)(()=>[...e].sort((e,t)=>{let a=e.data["Date End"]||e.data["End Date"]||"",r=t.data["Date End"]||t.data["End Date"]||"",l=j(a);return j(r).getTime()-l.getTime()}).filter(e=>"All"===a||e.status===a),[e,a]);return(0,r.jsxs)("div",{className:"font-sans min-h-screen bg-gradient-to-br from-blue-50 to-blue-200",children:[(0,r.jsx)(i,{}),(0,r.jsxs)("div",{className:"bg-white min-h-screen",children:[(0,r.jsx)(d,{options:c,activeOption:a,onOptionChange:s}),(0,r.jsxs)("div",{className:"px-2 py-8 md:px-4",children:[h&&(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}),N&&!h&&(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load tournaments"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:N}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}),!h&&!N&&(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[0===y.length&&(0,r.jsx)("div",{className:"col-span-full text-center text-gray-500",children:"No tournaments found for selected filters."}),y.map((e,t)=>{let a=e.data["Tournament Name"]||e.data.Place||"Untitled",l=e.data["Date Begin"]||e.data.Date||"",s=e.data["Date End"]||e.data["End Date"]||"",i=e.data.Site||e.data.Place||"",d=e.path.replace(/^www\//,"").replace(/\/data\.json$/,"").replace(/^www/,""),o=j(l),c=j(s),m=new Date,x="block bg-white rounded-xl shadow-lg hover:shadow-2xl transition border border-blue-100 p-6 text-center group",u="Completed",b="bg-gray-300 text-gray-800";o.getTime()>m.getTime()?(x+=" bg-gray-100",u="Planned",b="bg-gray-200 text-gray-700"):o.getTime()<=m.getTime()&&c.getTime()>=m.getTime()&&(x+=" border-green-500",u="In Progress",b="bg-green-200 text-green-800");let g="Completed"===u?"/".concat(d,"?page=standings"):"/".concat(d);return(0,r.jsxs)(n(),{href:g,className:x,children:[(0,r.jsx)("div",{className:"mb-2 text-lg font-bold text-blue-800 group-hover:text-blue-600",children:a}),(0,r.jsx)("div",{className:"mb-1 text-sm text-gray-500",children:l}),i&&(0,r.jsxs)("div",{className:"mb-1 text-xs text-gray-400 italic",children:["Site: ",i]}),(0,r.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat(b),children:u})]},t)})]})]}),!h&&!N&&(0,r.jsx)("div",{className:"px-4 pb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 pt-8 border-t border-gray-100",children:[(0,r.jsx)("button",{className:"px-3 py-2 rounded border bg-gray-50 text-blue-700 font-semibold shadow-sm disabled:opacity-50 hover:bg-gray-100 transition-colors",disabled:m<=1,onClick:()=>x(e=>Math.max(1,e-1)),children:"← Prev"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",m," of ",Math.max(1,Math.ceil(b/u))]}),(0,r.jsx)("button",{className:"px-3 py-2 rounded border bg-gray-50 text-blue-700 font-semibold shadow-sm disabled:opacity-50 hover:bg-gray-100 transition-colors",disabled:m>=Math.ceil(b/u),onClick:()=>x(e=>e+1),children:"Next →"})]})})]})]})}},7254:(e,t,a)=>{Promise.resolve().then(a.bind(a,2404))}},e=>{e.O(0,[355,776,307,74,358],()=>e(e.s=7254)),_N_E=e.O()}]);